body {
	@apply antialiased;
	@apply h-full;
	@apply overscroll-none;
	@apply text-base;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

html {
	@apply h-full;
	@apply bg-zinc-950;
	touch-action: manipulation;
}

/* ========================================================================
   CRITICAL FIX: NAVIGATION ALIGNMENT (Mobile & Desktop)
   ======================================================================== */
nav {
	display: flex !important;
	/* Ép dính trái tuyệt đối */
	justify-content: flex-start !important; 
	align-items: center !important;
	width: 100% !important; 
	max-width: 100% !important;
	padding-left: 1rem !important; 
	padding-right: 1rem !important;
	box-sizing: border-box !important;
}

/* Fix lỗi nhảy layout: Target tất cả div con trực tiếp của nav */
nav > div {
	display: flex !important;
	justify-content: flex-start !important;
	align-items: center !important;
	gap: 0.75rem;
	width: auto !important;
	
	/* Quan trọng: Reset margin để tránh việc trình duyệt tự căn giữa */
	margin-left: 0 !important;
	margin-right: auto !important; 
	
	/* Mobile fix: Đảm bảo không bị wrap xuống dòng gây vỡ */
	flex-wrap: nowrap !important;
}

nav a {
	white-space: nowrap;
	flex-shrink: 0;
}

/* ========================================================================
   TOGGLE SWITCH (Pixel-Perfect Fix for Mobile)
   ======================================================================== */

button[role="switch"],
.toggle-switch {
	display: inline-flex !important;
	align-items: center !important;
	justify-content: flex-start !important;
	flex-shrink: 0 !important;
	position: relative !important;
	cursor: pointer;
	border-radius: 9999px !important;
	border: 1px solid transparent !important;
	box-sizing: border-box !important;
	
	/* Reset mặc định của button mobile */
	padding: 0 !important;
	margin: 0 !important;
	appearance: none !important;
	-webkit-appearance: none !important;

	/* --- MOBILE SIZE (Dùng PX để tránh lỗi render) --- */
	/* Kích thước an toàn: 32px x 18px */
	width: 32px !important;
	height: 18px !important;
	
	transition: background-color 0.2s, border-color 0.2s;
}

/* Knob (Cục tròn) */
button[role="switch"] > span,
.toggle-switch > span {
	margin: 0 !important;
	position: absolute !important;
	top: 50% !important;
	transform: translateY(-50%) !important;
	display: block !important; /* Đổi thành block để render cứng cáp hơn */
	
	border-radius: 50% !important; /* Tròn tuyệt đối */
	background-color: white !important;
	pointer-events: none;
	
	transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;

	/* --- MOBILE KNOB --- */
	left: 2px !important; /* Cách trái 2px */
	
	/* Size: Track(18) - Pad(2+2) = 14px */
	width: 14px !important; 
	height: 14px !important;
}

/* Trạng thái Checked - Mobile */
button[role="switch"][aria-checked="true"] > span,
.toggle-switch[aria-checked="true"] > span {
	/* Move: Track(32) - Knob(14) - Pad(2+2) = 14px */
	transform: translateY(-50%) translateX(14px) !important;
}

/* --- DESKTOP OVERRIDES --- */
@media (min-width: 640px) {
	button[role="switch"],
	.toggle-switch {
		/* Desktop Size: 44px x 24px */
		width: 44px !important;
		height: 24px !important;
	}

	button[role="switch"] > span,
	.toggle-switch > span {
		left: 2px !important;
		
		/* Size: Track(24) - Pad(4) = 20px */
		width: 20px !important; 
		height: 20px !important; 
	}

	/* Checked - Desktop */
	button[role="switch"][aria-checked="true"] > span,
	.toggle-switch[aria-checked="true"] > span {
		/* Move: Track(44) - Knob(20) - Pad(4) = 20px */
		transform: translateY(-50%) translateX(20px) !important;
	}
}

/* ========================================================================
   RESPONSIVE UTILITIES
   ======================================================================== */

@media (max-width: 768px) {
	body { font-size: 14px; }
	
	/* Mobile Inputs fix */
	input[type="checkbox"] { padding: 8px; }
	
	/* Đảm bảo switch không bị đè bởi rule min-width/height chung */
	button[role="switch"], .toggle-switch {
		min-width: auto !important;
		min-height: auto !important;
	}
	
	/* Các button khác (trừ switch) */
	button:not([role="switch"]):not(.toggle-switch) {
		padding: 0.375rem 0.5rem;
		min-height: 36px;
	}
}

/* Smooth transitions & Hover effects */
button, a, input, select {
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (hover: hover) and (pointer: fine) {
	button:not([role="switch"]):hover, a:hover {
		transform: translateY(-1px);
	}
	button:not([role="switch"]):active, a:active {
		transform: translateY(0);
	}
}

/* Skeleton & Animation Utilities (Giữ nguyên) */
@keyframes shimmer {
	0% { background-position: -1000px 0; }
	100% { background-position: 1000px 0; }
}
.skeleton {
	animation: shimmer 2s infinite linear;
	background: linear-gradient(to right, #18181b 4%, #27272a 25%, #18181b 36%);
	background-size: 1000px 100%;
}

@keyframes fadeIn {
	from { opacity: 0; transform: translateY(10px); }
	to { opacity: 1; transform: translateY(0); }
}
.fade-in { animation: fadeIn 0.4s ease-out; }

@keyframes pulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.5; }
}
.pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

.gradient-text {
	background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #18181b; }
::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #52525b; }
*:focus-visible { outline: 2px solid #3b82f6; outline-offset: 2px; }

/* Nav Fade In */
@keyframes navFadeIn { 0% { opacity: 0; } 100% { opacity: 1; } }
.nav-container { animation: navFadeIn 0.3s ease-out forwards; }
@media (prefers-reduced-motion: reduce) { .nav-container { animation: none; } }
