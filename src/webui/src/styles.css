body {
	@apply antialiased;
	@apply h-full;
	@apply overscroll-none;
	@apply text-base;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

html {
	@apply h-full;
	@apply bg-white dark:bg-zinc-950;
	touch-action: manipulation;
}

/* ========================================================================
   CRITICAL FIX: NAVIGATION ALIGNMENT (Mobile & Desktop)
   ======================================================================== */
nav {
	display: flex !important;
	justify-content: flex-start !important; 
	align-items: center !important;
	width: 100% !important; 
	max-width: 100% !important;
	padding-left: 1rem !important; 
	padding-right: 1rem !important;
	box-sizing: border-box !important;
}

nav > div {
	display: flex !important;
	justify-content: flex-start !important;
	align-items: center !important;
	gap: 0.75rem;
	width: auto !important;
	
	/* Ép dính trái và ngăn tự động căn giữa */
	margin-left: 0 !important;
	margin-right: auto !important; 
	
	flex-wrap: nowrap !important;
}

nav a {
	white-space: nowrap;
	flex-shrink: 0;
}

/* ========================================================================
   TOGGLE SWITCH (Size Updated: Medium Mobile)
   ======================================================================== */

button[role="switch"],
.toggle-switch {
	display: inline-flex !important;
	align-items: center !important;
	justify-content: flex-start !important;
	flex-shrink: 0 !important;
	position: relative !important;
	cursor: pointer;
	border-radius: 9999px !important;
	border: 1px solid transparent !important;
	box-sizing: border-box !important;
	
	padding: 0 !important;
	margin: 0 !important;
	appearance: none !important;
	-webkit-appearance: none !important;

	/* --- MOBILE SIZE (Đã tăng to hơn xíu) --- */
	/* Kích thước: 40px x 22px */
	width: 40px !important;
	height: 22px !important;
	
	transition: background-color 0.2s, border-color 0.2s;
}

/* Knob (Cục tròn) */
button[role="switch"] > span,
.toggle-switch > span {
	margin: 0 !important;
	position: absolute !important;
	top: 50% !important;
	transform: translateY(-50%) !important;
	display: block !important;
	
	border-radius: 50% !important;
	background-color: white !important;
	pointer-events: none;
	
	transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;

	/* --- MOBILE KNOB --- */
	left: 2px !important;
	
	/* Size: Track(22) - Pad(4) = 18px -> To, dễ nhìn */
	width: 18px !important; 
	height: 18px !important;
}

/* Trạng thái Checked - Mobile */
button[role="switch"][aria-checked="true"] > span,
.toggle-switch[aria-checked="true"] > span {
	/* Move: Track(40) - Knob(18) - Pad(4) = 18px */
	transform: translateY(-50%) translateX(18px) !important;
}

/* --- DESKTOP OVERRIDES (Giữ nguyên vì đã ổn) --- */
@media (min-width: 640px) {
	button[role="switch"],
	.toggle-switch {
		/* Desktop Size: 44px x 24px */
		width: 44px !important;
		height: 24px !important;
	}

	button[role="switch"] > span,
	.toggle-switch > span {
		left: 2px !important;
		
		/* Size: Track(24) - Pad(4) = 20px */
		width: 20px !important; 
		height: 20px !important; 
	}

	/* Checked - Desktop */
	button[role="switch"][aria-checked="true"] > span,
	.toggle-switch[aria-checked="true"] > span {
		/* Move: Track(44) - Knob(20) - Pad(4) = 20px */
		transform: translateY(-50%) translateX(20px) !important;
	}
}

/* ========================================================================
   RESPONSIVE UTILITIES
   ======================================================================== */

@media (max-width: 768px) {
	body { font-size: 14px; }
	
	input[type="checkbox"] { padding: 8px; }
	
	button[role="switch"], .toggle-switch {
		min-width: auto !important;
		min-height: auto !important;
	}
	
	button:not([role="switch"]):not(.toggle-switch) {
		padding: 0.375rem 0.5rem;
		min-height: 36px;
	}
}

/* Smooth transitions & Hover effects */
button, a, input, select {
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (hover: hover) and (pointer: fine) {
	button:not([role="switch"]):hover, a:hover {
		transform: translateY(-1px);
	}
	button:not([role="switch"]):active, a:active {
		transform: translateY(0);
	}
}

/* Skeleton & Animation Utilities */
@keyframes shimmer {
	0% { background-position: -1000px 0; }
	100% { background-position: 1000px 0; }
}
.skeleton {
	animation: shimmer 2s infinite linear;
	background-size: 1000px 100%;
}
.dark .skeleton {
	background: linear-gradient(to right, #18181b 4%, #27272a 25%, #18181b 36%);
}
.skeleton {
	background: linear-gradient(to right, #f4f4f5 4%, #e4e4e7 25%, #f4f4f5 36%);
}

@keyframes fadeIn {
	from { opacity: 0; transform: translateY(10px); }
	to { opacity: 1; transform: translateY(0); }
}
.fade-in { animation: fadeIn 0.4s ease-out; }

@keyframes pulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.5; }
}
.pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

.gradient-text {
	background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { @apply bg-gray-100 dark:bg-zinc-900; }
::-webkit-scrollbar-thumb { @apply bg-gray-300 dark:bg-zinc-700 rounded; }
::-webkit-scrollbar-thumb:hover { @apply bg-gray-400 dark:bg-zinc-600; }
*:focus-visible { outline: 2px solid #3b82f6; outline-offset: 2px; }

@media (max-width: 640px) {
	.mobile-navbar-scroll {
		overflow-x: auto !important;
		-webkit-overflow-scrolling: touch;
		touch-action: pan-x;
		overscroll-behavior-x: contain;
		scrollbar-width: none;
		-ms-overflow-style: none;
		padding-bottom: 2px;
	}

	.mobile-navbar-scroll::-webkit-scrollbar {
		display: none;
	}
}

/* Nav Fade In */
@keyframes navFadeIn { 0% { opacity: 0; } 100% { opacity: 1; } }
.nav-container { animation: navFadeIn 0.3s ease-out forwards; }
@media (prefers-reduced-motion: reduce) { .nav-container { animation: none; } }
